"use strict";const $chatAreaMain=document.querySelector(".chatarea__main"),$chatAreaOuter=document.querySelector(".chatarea__outer"),$buttons=document.querySelectorAll(".header__top-wrapper"),$decors=document.querySelectorAll(".decor"),$master=document.querySelector(".rotate__animate"),$bot=document.querySelector(".bot__img");let state={response:"",avatar:"default",visible:!1,count:0};const bot={actions:[{greetings:{response:["Hello! Welcome to my Master's Gallery","Hi, welcome to my Master's Gallery"],avatar:"greetings"}},{introduce:{response:["My name is Botty. Nice to meet you!","I'am Botty. Nice to meet you!"],avatar:"introduce"}},{wiki:{data:[{color:"rgb(97, 218, 249)",response:"Nice catch! It's React main color."},{color:"rgb(118, 74, 188)",response:"Btw this is Redux main color."},{color:"rgb(222, 52, 51)",response:"You have found Angular main color."},{color:"rgb(83, 184, 131)",response:"Did you know this is Vue main color."}],avatar:["wiki-1","wiki-2","wiki-3","wiki-4"]}},{angry:{response:"Hey! Please stop lol!",avatar:"angry"}},{master:{response:"This is my Master! I like him.",avatar:"master"}},{theme:{response:{light:"Light theme.",dark:"Dark theme."},avatar:{light:"light",dark:"dark"}}}]},getColor=e=>{const t=e.target||e.currentTarget;return window.getComputedStyle(t).getPropertyValue("background-color")},parseMessage=(e,t)=>{const[{greetings:a},{introduce:r},{wiki:s},{angry:o},{master:n},{theme:c}]=bot.actions,i=e=>e[Math.floor(Math.random()*e.length)];switch(e.type){case"GREETINGS":return{...t,response:i(a.response),avatar:"greetings"};case"COLOR":const l=s.data.filter((t=>t.color===e.payload));return{...t,response:l[0]?.response,avatar:i(s.avatar)};case"INTRODUCE":return{...t,response:i(r.response),avatar:"introduce"};case"ANGRY":return{...t,response:o.response,avatar:"angry"};case"MASTER":return{...t,response:n.response,avatar:"likes"};case"THEME":return{...t,response:"light"===e.payload?c.response.light:c.response.dark,avatar:"light"===e.payload?c.avatar.light:c.avatar.dark};default:return t}},botAvatar=()=>{document.querySelector("#bot").src=`images/bot/${state.avatar}.png`},showBotMsg=e=>{const t=`\n        <p class="botarea__inner float-up">\n            <span>${e}</span> \n        </p>`;return $chatAreaOuter.insertAdjacentHTML("beforeend",t),$chatAreaOuter},removeBotMsg=()=>{const e=document.querySelectorAll(".botarea__inner"),t=e[e.length-1];e.forEach((e=>{e!==t&&(setTimeout((()=>{e.classList.remove("float-up"),e.classList.add("slide-out-top")}),5e3),setTimeout((()=>{e.remove()}),1e4))})),t.addEventListener("click",(()=>{t.classList.remove("float-up"),t.classList.add("slide-out-top"),state.avatar="rip",botAvatar()}))},botVoice=async e=>{const t=new SpeechSynthesisUtterance;state=await parseMessage(e,state),t.text=state.response,window.speechSynthesis.speak(t),$chatAreaMain.append(showBotMsg(t.text)),$chatAreaOuter.scrollTop=$chatAreaOuter.scrollHeight,botAvatar(),removeBotMsg()};$buttons.forEach((e=>{e.addEventListener("click",(()=>{if(!state.visible)return;let t;e.classList.contains("--light")&&(t="dark"),e.classList.contains("--dark")&&(t="light"),botVoice({type:"THEME",payload:t})}))})),$decors.forEach((e=>{e.addEventListener("mouseenter",(e=>{const t=getColor(e);botVoice({type:"COLOR",payload:t})}))})),$master.addEventListener("mouseenter",(e=>{botVoice({type:"MASTER"})})),$bot.addEventListener("mouseenter",(()=>{state.count++,"sleep"!==state.avatar&&(state.avatar="hey",state.count=0),"sleep"===state.avatar&&state.count>=3&&(state.avatar="huh",state.count=0),botAvatar()})),setInterval((()=>{"default"===state.avatar&&(state.avatar="sleep",botAvatar())}),32e3),setInterval((()=>{"sleep"!==state.avatar&&(state.avatar="default",botAvatar())}),1e4);const observer=new IntersectionObserver((function(e,t){e.forEach((e=>{e.isIntersecting&&(state.visible=!state.visible,botVoice({type:"GREETINGS"}),t.unobserve(e.target))}))}),{root:null,threshold:1,rootMargin:""});observer.observe($bot);export default botVoice;